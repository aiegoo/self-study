# 리눅스 마스터 2급 실기 : PART02 리눅스 운영 및 관리

- 2급 실기

- 참고자료 : 이기적 기본서 리눅스마스터 2급 (권소라 저)

# CHAPTER01. 파일 시스템 관련 명령어

<hr>

## 권한 및 그룹 설정

리눅스 시스템의 모든 파일과 디렉터리에는 접근권한(permission)과 소유권(ownership)이 부여된다.

```
[root@localhost test]# pwd
/usr/local/test
[root@localhost test]# ls -lR
.:
total 0
drwxr-xr-x. 2 root root  6 Dec  4 02:37 test1
drwxr-xr-x. 2 root root 39 Dec  4 02:50 test2

./test1:
total 0

./test2:
total 4
-rw-r--r--. 1 root root   0 Dec  4 02:40 test2.txt
-rw-r--r--. 1 root root 146 Dec  4 02:50 test.txt
```

drwxr-xr-x는 파일이나 디렉토리의 허가권

root root는 파일이나 디렉토리의 소유권을 나타낸다.

### 소유권과 관련 명령어

✔ chwon [옵션] 소유자[:그룹명] 파일명

파일과 디렉토리의 사용자 소유권과 그룹 소유권을 변경한다. 옵션으로 -R을 입력하면 하위 디렉토리를 포함하여 디렉토리 내부의 모든 파일의 소유권을 변경한다.

✔ chgrp [옵션] 그룹명 파일명

change group을 줄인 명령어로 파일이나 디렉터리의 그룹 소유권을 변경한다. -R 옵션을 입력하면 하위 디렉토리를 포함하여 디렉토리 내부의 모든 파일의 그룹 소유권 변경한다.

### 허가권과 관련 명령어


```
[root@localhost test]# pwd
/usr/local/test
[root@localhost test]# ls -lR
.:
total 0
drwxr-xr-x. 2 root root  6 Dec  4 02:37 test1
drwxr-xr-x. 2 root root 39 Dec  4 02:50 test2

./test1:
total 0

./test2:
total 4
-rw-r--r--. 1 root root   0 Dec  4 02:40 test2.txt
-rw-r--r--. 1 root root 146 Dec  4 02:50 test.txt
```

|기호||파일유형|
|:--:|:--:|:--:|
|-||일반파일|
|d||디렉토리파일|
|특수파일|b|- 블록 단위로 읽고 쓰는 블록 장치 특수파일 <br> - 블록장치 : 하드디스크, 플로피 디스크, CD/DVD 등의 저장장치|
|특수파일|c|- 문자 단위로 읽고 쓰는 문자 장치 특수 파일 <br> - 문자 장치로는 마우스, 키보드, 프린터의 입출력 장치|
|특수파일|l|- 기호적 링크로 바로가기 아이콘 역할 수행 <br> - 연결되어 있는 파일과 실제 파일은 다른 곳에 존재|
|특수파일|p|파이프|
|특수파일|s|소켓|


```
r : read, w : write, x : execute로 8진수 숫자 모드로 r은 4, w은 2, x는 1이다.

읽기, 쓰기 또는 실행의 접근 제한 표시는 하이픈(-)으로 나타낸다.

-는 8진수 숫자 모드로 0이다.
```

✔ chmod [옵션] 파일명

파일이나 디렉토리의 접근 허가권을 변경하는 명령어이다. 옵션으로는 -R은 하위 디렉토리에 포함되어 있는 모든 디렉토리 및 파일의 권한을 변경한다.

- 기호 모드

|기호모드||의미|
|--|--|--|
|사용자|u|소유자|
|사용자|g|그룹|
|사용자|o|기타 사용자|
|사용자|a|모든 사용자(u+g+o)|
|연산자|+|허가권 부여|
|연산자|-|허가권 제거|
|연산자|=|특정 사용자에게 허가권 지정|
|권한|r|읽기|
|권한|w|쓰기|
|권한|x|실행|

```
chmod u+w
# 소유자에게 쓰기 권한 부여

chmod u-x
# 소유자의 실행 권한 제거

chmod o=rw
# 기타 사용자에게 읽기와 실행 권한 부여
```

✔ umask [옵션][값]

새로 생성되는 파일이나 디렉토리의 기본 허가권 값을 지정한다.
옵션으로 -S를 입력하면 umask 값을 문자로 표기한다.

✔ Sticky bit

일반적으로 공용 디렉터리를 사용할 때, sticky bit를 설정하여 사용한다.

1. sticky bit가 설정되어 있는 디렉토리 안의 내용은 해당 파일의 소유자나 root만이 변경이 가능하게 하여 공용 디렉토리라도 권한에 제약을 두어 다른 사용자들의 파일을 보호하기 위한 목적으로 만든 것이다.
2. 사용자 권한을 지정하기 어려운 프로그램들이 일시적으로 특정 디렉토리에 파일을 생성하고 삭제하도록 이용된다.
3. 특정 응용 프로그램이 다른 응용 프로그램에서 생성한 파일을 삭제하지 못하는 권한 설정을 한다.
4. 설정된 디렉토리에는 누구든 접근 가능하고 파일을 생성할 수 있다.
5. 생성된 sticky bit 파일을 삭제 시에는 소유자(파일 생성자)와 관리자만 지울 수 있다. 다른 사용자는 자신의 소유가 아닌 파일을 삭제 할 수 없다.
- sticky bit가 적용된 디렉토리 내에 파일을 생성하는 것은 누구나 가능하지만, 삭제는 생성자 본인과 관리자만 가능하다.
- 일반적으로 sticky bit로 설정되는 디렉토리는 /tmp 안에 생성한다.

✔ 디스크 쿼터(Disk Quota)

파일 시스템마다 사용자나 그룹이 생성할 수 있는 파일의 용량 및 개수를 제한하는 것이다. 보통 블록 단위의 용량 제한과 inode의 개수를 제한한다. 

✔ edquota [옵션][계정명 또는 그룹명]

편집기를 이용하여 사용자나 그룹에 디스크 사용량을 할당하는 명령어이다.

- 옵션

```
-u : 사용자 디스크 할당량 설정
-g : 그룹 디스크 할당량 설정
-t : 디스크 할당량 유예기간 설정
-p : 디스크 할당량 설정을 다른 사용자와 동일하게 설정
```

✔ setquota

편집기가 기반이 아닌 명령행에서 직접 사용자나 그룹에 디스크 사용량을 할당하는 명령어

```
setquota [옵션][계정명 또는 그룹명][Block soft limit][Block hard limit][inode soft limit][inode hard limit][파티션명]

# -u : 사용자 디스크 할당량 설정
# -g : 그룹 디스크 할당량 설정
# -a : 해당 시스템의 모든 설정
# -t : 유예기간을 초 단위로 설정
```

## 파일 시스템의 관리

✔ mount와 umount

마운트는 특정 디바이스를 특정 디렉토리처럼 사용하기 위해 장치와 디렉토리를 연결하는 것이다.

리눅스는 PnP(Plug and Play) 기능을 지원하지만 지원하는 하드웨어가 많지 않으므로, 시스템 부팅 후에 수동으로 마운트해서 사용을 하고 사용이 끝난 후에는 언마운트를 시킨다.

```
mount [옵션][디바이스명][디렉토리명]
umount [옵션][디바이스명][디렉토리명]
```

✔ eject

이동식 보조기억장치 등과 같은 미디어를 해제하고 장치를 제거하는 명령어이다.

```
eject [옵션][디바이스명]

# -r : 시디롬을 마운트 해제
# -f : 플로피를 마운트 해제
```

✔ fdisk

새로운 파티션의 생성, 기존 파티션의 삭제, 파티션의 타입 결정 등의 작업을 수행할 수 있다.

fdisk 프로그램은 한 번에 한 디스크에 대해서만 작업을 수행한다.

fdisk는 명령어 프롬프트 중심의 매우 간단한 인터페이스를 가지고 있다.

```
fdisk [옵션][장치명]

# -v : fdisk 버전 정보 표시
# -l : 현재 디스크의 파티션 테이블 정보 표시
# -s : 지정된 파티션의 크기를 블록 단위 표시
```

fdisk를 실행하기 위해서는 어떠한 디스크의 파티션을 나눌 것인지 알려주어야 한다.

하나의 컴퓨터에 여러 개의 하드디스크가 설치 될 수 있으므로 어떤 하드디스크의 파티션을 변경할 것인지 알려주어야 한다.